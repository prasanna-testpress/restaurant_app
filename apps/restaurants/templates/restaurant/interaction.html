<aside class="space-y-6 lg:sticky lg:top-24">

    <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm">
        <h3 class="font-bold text-gray-800 mb-4">Make a Plan</h3>
        <div class="flex flex-col gap-3">
            {% if user.is_authenticated %}
                <button 
                    id="bookmark-btn" 
                    data-url="{% url 'restaurants:bookmark' restaurant.id %}" 
                    data-state="{{ is_bookmarked|yesno:'true,false' }}" 
                    class="w-full py-2.5 font-semibold rounded-lg flex items-center justify-center gap-2
                        {% if is_bookmarked %}
                            bg-brand text-white
                        {% else %}
                            border border-brand text-brand
                        {% endif %}">
                    <i class="fa-solid fa-bookmark"></i>
                    <span>
                        {% if is_bookmarked %}
                            Bookmarked
                        {% else %}
                            Bookmark
                        {% endif %}
                    </span>
                </button>
                <button 
                    id="visited-btn" 
                    data-url="{% url 'restaurants:visited' restaurant.id %}" 
                    data-state="{{ is_visited|yesno:'true,false' }}" 
                    class="w-full py-2.5 font-semibold rounded-lg flex items-center justify-center gap-2
                        {% if is_visited %}
                            bg-green-600 text-white
                        {% else %}
                            border border-green-600 text-green-600
                        {% endif %}">
                    <i class="fa-solid fa-check"></i>
                    <span>
                        {% if is_visited %}Visited{% else %}Mark Visited
                        {% endif %}
                    </span>
                </button>
            {% else %}
                <p class="text-sm text-gray-500 text-center">
                    <a href="{% url 'login' %}" class="text-brand font-semibold hover:underline">
                        Log in
                    </a>
                    to Bookmark / Mark Visited this restaurant.
                </p>
            {% endif %}

    </div>

    <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm">
        <h3 class="font-bold text-gray-800 mb-4">Restaurant Info</h3>
        <ul class="space-y-4">
            <li>
                <strong class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">
                    Address
                </strong>
                <p class="text-sm text-gray-700 flex gap-2 items-start">
                    <i class="fa-solid fa-map-pin text-brand mt-1"></i>
                    {{ restaurant.address|default:"Address not available" }}
                </p>
            </li>
            <li class="border-t border-gray-50 pt-4">
                <strong class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">
                    Status
                </strong>
                {% if restaurant.is_open %}
                    <p class="text-green-600 font-bold text-sm flex items-center gap-2">
                        <i class="fa-regular fa-clock"></i>
                        Open Now
                    </p>
                {% else %}
                    <p class="text-red-500 font-bold text-sm flex items-center gap-2">
                        <i class="fa-solid fa-store-slash"></i>
                        Closed
                    </p>
                {% endif %}
            </li>
        </ul>
    </div>
</aside>
